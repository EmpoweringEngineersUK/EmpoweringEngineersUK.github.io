<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-PG4ZJ7W444"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-PG4ZJ7W444');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ethics Compass | EmpoweringEngineers.uk</title>
    
    <link rel="icon" type="image/jpeg" href="Favicon.jpg">
    <meta name="google-adsense-account" content="ca-pub-7071036534151105">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7071036534151105" crossorigin="anonymous"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@700&family=Roboto:wght@400;500;700&family=Courier+Prime&display=swap" rel="stylesheet">
    
    <style>
        :root { 
            --midnight-navy: #0D1B2A; 
            --terminal-green: #00FF99; 
            --burnt-orange: #FF9F43; 
            --cloud-white: #FAFAFA; 
            --slate-grey: #8899A6; 
            --dark-card: rgba(255, 255, 255, 0.05); 
            --border-color: #1F3A52; 
        }

        body { 
            font-family: 'Roboto', sans-serif; 
            background: var(--midnight-navy); 
            color: var(--cloud-white); 
            margin: 0; 
            padding: 20px; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
        }

        .site-brand { 
            text-decoration: none; 
            font-family: 'Lora', serif; 
            font-size: 2rem; 
            color: var(--cloud-white); 
            font-weight: bold; 
            margin-bottom: 5px; 
        }
        .site-brand span { 
            color: var(--terminal-green); 
            text-shadow: 0 0 15px rgba(0, 255, 153, 0.3); 
        }
        
        .container { max-width: 1000px; width: 100%; display: grid; grid-template-columns: 1fr 1fr; gap: 30px; }
        .card { background: var(--dark-card); padding: 30px; border-radius: 8px; border: 1px solid var(--border-color); display: flex; flex-direction: column; }
        
        h2 { 
            border-bottom: 1px solid var(--terminal-green); 
            color: var(--terminal-green); 
            padding-bottom: 10px; 
            margin-top: 0; 
            font-family: 'Courier Prime', monospace; 
            text-transform: uppercase; 
            letter-spacing: 1px; 
        }

        /* INPUTS */
        label { display: block; margin-bottom: 5px; color: var(--burnt-orange); font-weight: bold; font-size: 0.85rem; }
        select, textarea { 
            width: 100%; 
            padding: 10px; 
            background: rgba(0,0,0,0.3); 
            border: 1px solid var(--border-color); 
            color: white; 
            border-radius: 4px; 
            font-family: 'Roboto', sans-serif; 
            margin-bottom: 15px; 
            box-sizing: border-box;
        }
        select:focus, textarea:focus { outline: none; border-color: var(--terminal-green); }
        textarea { height: 100px; resize: vertical; }

        .profile-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px; }

        /* BUTTONS */
        .principle-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px; }
        .principle-btn { background: transparent; border: 1px solid var(--slate-grey); color: var(--slate-grey); padding: 15px; cursor: pointer; border-radius: 6px; font-weight: bold; transition: 0.3s; text-align: left; }
        .principle-btn:hover, .principle-btn.active { border-color: var(--terminal-green); color: var(--terminal-green); background: rgba(0, 255, 153, 0.05); }
        .principle-btn strong { display: block; font-size: 1.1rem; margin-bottom: 5px; }

        .ai-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px dashed var(--terminal-green);
            color: var(--terminal-green);
            padding: 15px;
            width: 100%;
            cursor: pointer;
            font-family: 'Courier Prime', monospace;
            margin-top: 20px;
            text-transform: uppercase;
            font-weight: bold;
            display: none; /* Hidden until generated */
        }
        .ai-btn:hover { background: rgba(0, 255, 153, 0.1); }

        /* OUTPUT */
        .output-box { background: #09121d; padding: 25px; border-radius: 6px; border: 1px solid var(--border-color); min-height: 400px; white-space: pre-wrap; line-height: 1.6; font-family: 'Roboto', sans-serif; position: relative; }
        .section-header { color: var(--burnt-orange); font-weight: bold; margin-top: 20px; display: block; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 5px; margin-bottom: 10px; }

        .reset-link { color: var(--slate-grey); font-size: 0.8rem; text-decoration: underline; cursor: pointer; display: block; text-align: right; margin-top: 10px; }
        .reset-link:hover { color: var(--burnt-orange); }

        footer { margin-top: 50px; color: var(--slate-grey); font-size: 0.8rem; text-align: center; }
        footer a { color: var(--slate-grey); text-decoration: underline; margin: 0 10px; }

        @media (max-width: 800px) { .container { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <a href="index.html" class="site-brand">Empowering<span>Engineers</span>.uk</a>
    
    <nav style="display:flex; justify-content:center; gap:15px; flex-wrap:wrap; padding-bottom:10px; margin-bottom:30px; border-bottom:1px solid var(--border-color); width:100%; max-width:1000px;">
        <a href="index.html" style="color:var(--terminal-green); text-decoration:none; font-family:'Courier Prime'; font-weight:bold;">[HOME]</a>
        <a href="guide.html" style="color:var(--slate-grey); text-decoration:none; font-family:'Courier Prime';">Manual</a>
        <a href="STAR_engine.html" style="color:var(--slate-grey); text-decoration:none; font-family:'Courier Prime';">STAR-Gen</a>
        <a href="STAR_reviewer.html" style="color:var(--slate-grey); text-decoration:none; font-family:'Courier Prime';">Reviewer</a>
        <a href="ethics_tool.html" style="color:var(--slate-grey); text-decoration:none; font-family:'Courier Prime';">Ethics</a>
        <a href="cpd_tool.html" style="color:var(--slate-grey); text-decoration:none; font-family:'Courier Prime';">CPD</a>
        <a href="interview_tool.html" style="color:var(--slate-grey); text-decoration:none; font-family:'Courier Prime';">Interview</a>
    </nav>

    <div class="container">
        <div class="card">
            <h2>1. Context Setup</h2>
            <div class="profile-grid">
                <div>
                    <label>Registration Level</label>
                    <select id="regLevel">
                        <option value="IEng">IEng (Incorporated)</option>
                        <option value="CEng">CEng (Chartered)</option>
                    </select>
                </div>
                <div>
                    <label>Current Role</label>
                    <select id="role">
                        <option value="Junior">Junior / Graduate</option>
                        <option value="Senior">Senior Engineer</option>
                        <option value="Manager">Manager / Lead</option>
                    </select>
                </div>
                <div>
                    <label>Industry</label>
                    <select id="industry">
                        <option value="General">General Engineering</option>
                        <option value="Civil">Civil & Construction</option>
                        <option value="Aerospace">Aerospace & Safety Critical</option>
                        <option value="Software">Software & Data</option>
                        <option value="OilGas">Energy & Process</option>
                    </select>
                </div>
            </div>

            <label>The Dilemma</label>
            <p style="color:var(--slate-grey); font-size:0.8rem; margin-top:0;">Describe the conflict (e.g., "Pressure to cut testing time due to budget").</p>
            <textarea id="dilemmaInput" placeholder="Type your scenario here..."></textarea>
            
            <a onclick="clearEthics()" class="reset-link">Clear Form / Start New</a>

            <h2>2. Select RAEng Principle</h2>
            <div class="principle-grid">
                <button class="principle-btn" onclick="analyze('integrity')"><strong>1. Honesty & Integrity</strong><span style="font-size:0.8rem">Bribery, conflicts of interest, truthfulness.</span></button>
                <button class="principle-btn" onclick="analyze('respect')"><strong>2. Respect for Life</strong><span style="font-size:0.8rem">Safety, environment, public good.</span></button>
                <button class="principle-btn" onclick="analyze('accuracy')"><strong>3. Accuracy & Rigour</strong><span style="font-size:0.8rem">Competence, not misleading, validation.</span></button>
                <button class="principle-btn" onclick="analyze('leadership')"><strong>4. Leadership</strong><span style="font-size:0.8rem">Listening, influencing, culture.</span></button>
            </div>
        </div>

        <div class="card">
            <h2>3. Professional Analysis</h2>
            <div id="outputArea" class="output-box">Select a principle to generate a structured analysis...</div>
            <button id="aiPromptBtn" class="ai-btn" onclick="copyAiPrompt()">>> COPY AI "MEGA-PROMPT"</button>
        </div>
    </div>

    <footer>
        <p>&copy; <script>document.write(new Date().getFullYear())</script> Empowering Engineers UK</p>
        <p>
            <a href="about.html">About Us</a> | 
            <a href="contact.html">Contact Us</a> | 
            <a href="terms.html">Terms of Use</a> | 
            <a href="privacy.html">Privacy Policy</a>
        </p>
    </footer>

    <script>
        // --- AUTO-SAVE LOGIC ---
        window.onload = function() {
            if(localStorage.getItem('ethics_reg')) document.getElementById('regLevel').value = localStorage.getItem('ethics_reg');
            if(localStorage.getItem('ethics_role')) document.getElementById('role').value = localStorage.getItem('ethics_role');
            if(localStorage.getItem('ethics_industry')) document.getElementById('industry').value = localStorage.getItem('ethics_industry');
            if(localStorage.getItem('ethics_dilemma')) document.getElementById('dilemmaInput').value = localStorage.getItem('ethics_dilemma');
        };

        document.getElementById('regLevel').addEventListener('change', function(){ localStorage.setItem('ethics_reg', this.value) });
        document.getElementById('role').addEventListener('change', function(){ localStorage.setItem('ethics_role', this.value) });
        document.getElementById('industry').addEventListener('change', function(){ localStorage.setItem('ethics_industry', this.value) });
        document.getElementById('dilemmaInput').addEventListener('input', function(){ localStorage.setItem('ethics_dilemma', this.value) });

        function clearEthics() {
            if(confirm("Clear your ethical scenario?")) {
                document.getElementById('dilemmaInput').value = "";
                localStorage.removeItem('ethics_dilemma');
                document.getElementById('outputArea').innerHTML = "Select a principle to generate a structured analysis...";
                document.getElementById('aiPromptBtn').style.display = 'none';
            }
        }

        // --- EXPANDED ANALYSIS LOGIC (V2.1) ---
        const contextDB = {
            Civil: { regs: "CDM 2015, Building Safety Act, ISO 14001", risk: "public safety, structural failure, and environmental damage", body: "ICE / IStructE" },
            Aerospace: { regs: "EASA/FAA Airworthiness Directives, AS9100", risk: "catastrophic failure and loss of life (Safety Critical)", body: "RAeS" },
            Software: { regs: "GDPR, ISO 27001 (InfoSec), WCAG", risk: "data privacy breaches, algorithmic bias, and downtime", body: "BCS / IET" },
            OilGas: { regs: "COMAH Regulations, ATEX/DSEAR", risk: "process safety events and ecological disaster", body: "IMechE / IChemE" },
            General: { regs: "Health & Safety at Work Act 1974, ISO 9001", risk: "operator safety and professional negligence", body: "IMechE / IET" }
        };

        const regExpectation = {
            IEng: "As an IEng, your focus is on maintaining established standards and managing immediate risks within your area of responsibility. You must ensure you do not deviate from approved procedures without authorisation.",
            CEng: "As a CEng, you are expected to handle complex, non-standard problems. You must assess the wider systemic implications of this dilemma and lead the development of a solution that may require new methodologies."
        };

        let currentPrinciple = ""; // Store for the AI prompt generator

        function analyze(principle) {
            currentPrinciple = principle;
            const input = document.getElementById('dilemmaInput').value;
            const regLevel = document.getElementById('regLevel').value;
            const role = document.getElementById('role').value;
            const industry = document.getElementById('industry').value;
            
            if(!input) { alert("Please describe your dilemma first."); return; }

            const ctx = contextDB[industry];
            const regText = regExpectation[regLevel];
            
            let analysis = "";
            let actionList = "";
            let script = "";

            if(principle === 'integrity') {
                analysis = `The Code of Conduct requires you to reject bribery and declare conflicts of interest. In **${industry}**, this specifically relates to ${industry === 'Civil' ? 'procurement and tender fairness' : 'reporting accurate test data'}.\n\n${regText}`;
                if(role === 'Junior') {
                    actionList = `1. **Verify:** Check the company handbook/policy regarding this specific issue.\n2. **Record:** Keep a written log of the request/situation.\n3. **Escalate:** Formally raise this with your Line Manager or Ethics Officer.`;
                } else {
                    actionList = `1. **Refuse:** Explicitly refuse to sign-off on any document that is misleading.\n2. **Isolate:** Remove yourself from the decision-making loop to avoid Conflict of Interest.\n3. **Report:** If the issue persists, you have a duty to inform the regulatory body (${ctx.body}).`;
                }
                script = `"I recognized a potential breach of Integrity regarding compliance with **${ctx.regs}**. Despite the commercial pressure, I prioritized professional standards. I formally declared the conflict to ensuring transparency."`;
            
            } else if (principle === 'respect') {
                analysis = `Your primary obligation is to the public good. In **${industry}**, a failure here results in **${ctx.risk}**. This overrides any commercial contract or NDA.\n\n${regText}`;
                if(role === 'Manager') {
                    actionList = `1. **Stop Work:** You have the authority and duty to halt operations if safety is compromised.\n2. **Resource:** Authorize the budget required to fix the safety gap.\n3. **Review:** Initiate a formal HAZOP/Risk Review immediately.`;
                } else {
                    actionList = `1. **Assess:** quantifying the risk (Probability x Severity).\n2. **Notify:** Inform the stakeholders of the violation of **${ctx.regs}** in writing.\n3. **Whistleblow:** If ignored, escalate to the HSE or Regulator.`;
                }
                script = `"I identified a significant risk to **${ctx.risk}**. Consistent with the principle of Respect for Life, I refused to compromise on safety standards. I referenced **${ctx.regs}** to demonstrate that the proposed shortcut was illegal."`;

            } else if (principle === 'accuracy') {
                analysis = `Engineers must not mislead or work outside their competence. ${regLevel === 'CEng' ? 'You are responsible for validating novel solutions.' : 'You must ensure you are applying standards correctly.'}`;
                actionList = `1. **Validate:** Do not rely on unverified assumptions. Demand raw data.\n2. **Peer Review:** Request a third-party audit of the calculations.\n3. **Qualify:** Clearly state the limitations/confidence level of your report.`;
                script = `"To ensure Accuracy & Rigour, I challenged the initial assumptions. I instigated a peer review process and refused to release the data until it was validated against **${ctx.body}** best practice guidelines."`;

            } else if (principle === 'leadership') {
                analysis = `Leadership involves upholding the reputation of the profession and fostering a culture of safety.\n\n${regText}`;
                if(role === 'Junior') {
                    actionList = `1. **Model:** Demonstrate the correct behaviour even if others are cutting corners.\n2. **Ask:** Ask 'open questions' in meetings to highlight the risk without being confrontational.`;
                } else {
                    actionList = `1. **Culture:** promote a 'Just Culture' where mistakes can be reported without fear.\n2. **Educate:** Use this as a teachable moment for the team regarding **${ctx.regs}**.\n3. **Advocate:** Publicly support team members who raise safety concerns.`;
                }
                script = `"I took a Leadership role by shifting the focus from 'blame' to 'process improvement'. I championed a culture of transparency, ensuring the team felt safe to report the issue, thereby protecting the wider business from **${ctx.risk}**."`;
            }

            const finalHTML = 
`<span class="section-header">>> THE DILEMMA (User Input)</span>
"${input}"

<span class="section-header">>> CONTEXTUAL ANALYSIS (${regLevel})</span>
${analysis}

<span class="section-header">>> RECOMMENDED ACTION PLAN (${role})</span>
${actionList}

<span class="section-header">>> INTERVIEW SCRIPT (STAR Method)</span>
<em style="color:#00FF99">${script}</em>`;

            document.getElementById('outputArea').innerHTML = finalHTML.replace(/\n/g, "<br>");
            document.getElementById('aiPromptBtn').style.display = "block"; // Show button
        }

        // --- NEW: AI PROMPT GENERATOR ---
        function copyAiPrompt() {
            const input = document.getElementById('dilemmaInput').value;
            const regLevel = document.getElementById('regLevel').value;
            const role = document.getElementById('role').value;
            const industry = document.getElementById('industry').value;
            const p = currentPrinciple.charAt(0).toUpperCase() + currentPrinciple.slice(1);

            const prompt = `Act as a Senior Fellow of the IMechE/IET. I am a ${role} Engineer in the ${industry} industry, working towards ${regLevel} registration.

I am facing this Ethical Dilemma:
"${input}"

Please analyze this using the Royal Academy of Engineering's Statement of Ethical Principles, specifically focusing on "${p}".

1. Identify the specific clause of the UK-SPEC or Code of Conduct this violates.
2. Provide a step-by-step immediate action plan suitable for my seniority level.
3. Draft a formal email I could send to my manager to raise this concern professionally.`;

            navigator.clipboard.writeText(prompt).then(() => {
                const btn = document.getElementById('aiPromptBtn');
                btn.innerText = ">> COPIED! PASTE INTO CHATGPT/CLAUDE";
                setTimeout(() => { btn.innerText = ">> COPY AI \"MEGA-PROMPT\""; }, 3000);
            });
        }
    </script>
</body>
</html>