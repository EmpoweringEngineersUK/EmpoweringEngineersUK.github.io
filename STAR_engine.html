<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STAR Engine | EmpoweringEngineers.uk</title>
    <link rel="icon" type="image/jpeg" href="Favicon.jpg">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7071036534151105" crossorigin="anonymous"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-PG4ZJ7W444"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-PG4ZJ7W444');
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@700&family=Roboto:wght@400;500;700&family=Courier+Prime&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="layout.css">
    
    <style>
        /* PAGE SPECIFIC STYLES */
        .container { max-width: 800px; width: 100%; }

        .card { 
            background: var(--dark-card); 
            padding: 30px; 
            border-radius: 8px; 
            border: 1px solid var(--border-color); 
            margin-bottom: 20px; 
            position: relative;
        }

        h2 { 
            border-bottom: 1px solid var(--terminal-green); 
            color: var(--terminal-green); 
            padding-bottom: 10px; 
            margin-top: 0; 
            font-family: 'Courier Prime', monospace; 
            text-transform: uppercase; 
            letter-spacing: 1px; 
        }

        label { display: block; margin-top: 20px; color: var(--burnt-orange); font-weight: bold; }
        .hint { font-size: 0.85rem; color: var(--slate-grey); margin-bottom: 5px; display: block; }
        
        textarea { 
            width: 100%; 
            height: 80px; 
            background: rgba(0,0,0,0.3); 
            border: 1px solid var(--border-color); 
            color: white; 
            padding: 10px; 
            font-family: 'Roboto', sans-serif; 
            border-radius: 4px; 
            resize: vertical;
            box-sizing: border-box;
        }
        textarea:focus { outline: none; border-color: var(--terminal-green); }

        .word-count { font-size: 0.75rem; color: var(--slate-grey); text-align: right; margin-top: 2px; font-family: 'Courier Prime', monospace; }

        .action-btn { 
            background: var(--terminal-green); 
            color: var(--midnight-navy); 
            border: none; 
            padding: 15px; 
            width: 100%; 
            font-weight: bold; 
            border-radius: 6px; 
            cursor: pointer; 
            text-transform: uppercase; 
            font-size: 1rem; 
            margin-top: 25px; 
            transition: 0.3s; 
        }
        .action-btn:hover { opacity: 0.9; transform: translateY(-2px); }

        .ai-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px dashed var(--terminal-green);
            color: var(--terminal-green);
            padding: 12px;
            width: 100%;
            cursor: pointer;
            font-family: 'Courier Prime', monospace;
            margin-top: 15px;
            text-transform: uppercase;
            font-weight: bold;
            font-size: 0.9rem;
        }
        .ai-btn:hover { background: rgba(0, 255, 153, 0.1); }

        .output-box { 
            background: #09121d; 
            padding: 20px; 
            border-left: 4px solid var(--terminal-green); 
            margin-top: 30px; 
            display: none; 
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <div class="sticky-container">
        <a href="index.html" class="site-brand">Empowering<span>Engineers</span>.uk</a>
        <nav>
            <a href="index.html">[HOME]</a>
            <a href="guide.html">Manual</a>
            <a href="STAR_engine.html" class="active">STAR-Gen</a>
            <a href="STAR_reviewer.html">Reviewer</a>
            <a href="glossary_tool.html">Decoder</a>
            <a href="ethics_tool.html">Ethics</a>
            <a href="cpd_tool.html">CPD</a>
            <a href="interview_tool.html">Interview</a>
            <a href="report_tool.html">Report</a>
            <a href="feedback_tool.html">Feedback</a>
        </nav>
    </div>

    <div class="container">
        <div class="card">
            <h2>Competency Generator</h2>
            <p style="color:var(--slate-grey); font-size:0.9rem;">
                Drafting technical reports is hard. Use this tool to force yourself into the <strong>STAR format</strong> (Situation, Task, Action, Result). 
                Focus on "I", not "We".
            </p>

            <label>1. Situation (Context)</label>
            <span class="hint">Briefly describe the project, problem, or technical challenge. Keep it short.</span>
            <textarea id="situation" placeholder="e.g. During the shutdown of the main turbine, we identified a vibration issue..."></textarea>
            <div class="word-count" id="situationCount">0 words</div>

            <label>2. Task (Your Responsibility)</label>
            <span class="hint">What were YOU specifically assigned to do?</span>
            <textarea id="task" placeholder="e.g. As the Lead Engineer, I was responsible for diagnosing the root cause..."></textarea>
            <div class="word-count" id="taskCount">0 words</div>

            <label>3. Action (The Critical Part)</label>
            <span class="hint">What did you calculate, design, lead, or decide? (Use strong verbs: Calculated, Authorized, Negotiated).</span>
            <textarea id="action" placeholder="e.g. I performed a Finite Element Analysis and authorized the replacement of..."></textarea>
            <div class="word-count" id="actionCount">0 words</div>

            <label>4. Result (Outcome)</label>
            <span class="hint">What changed? Did you save money, improve safety, or meet the deadline?</span>
            <textarea id="result" placeholder="e.g. This reduced downtime by 12 hours and saved the project Â£50k..."></textarea>
            <div class="word-count" id="resultCount">0 words</div>

            <div class="word-count" id="totalCount" style="margin-top:15px; font-weight:bold; color:var(--terminal-green);">Total: 0 words</div>

            <button class="action-btn" onclick="generate()">Compile Evidence</button>
            <button class="action-btn" onclick="clearData()" style="background:transparent; border:1px solid var(--slate-grey); color:var(--slate-grey); margin-top:10px;">Reset Form</button>
            
            <div id="outputBox" class="output-box"></div>
            
            <button id="aiBtn" class="ai-btn" onclick="copyAiPrompt()" style="display:none;">>> COPY AI "CEng CRITIQUE" PROMPT</button>
        </div>
    </div>

    <footer>
        <p>&copy; <script>document.write(new Date().getFullYear())</script> Empowering Engineers UK</p>
        <p>
            <a href="about.html">About Us</a> | 
            <a href="contact.html">Contact Us</a> | 
            <a href="terms.html">Terms of Use</a> | 
            <a href="privacy.html">Privacy Policy</a>
        </p>
    </footer>

    <script>
        // --- AUTO-SAVE SYSTEM ---
        window.onload = function() {
            if(localStorage.getItem('star_situation')) document.getElementById('situation').value = localStorage.getItem('star_situation');
            if(localStorage.getItem('star_task')) document.getElementById('task').value = localStorage.getItem('star_task');
            if(localStorage.getItem('star_action')) document.getElementById('action').value = localStorage.getItem('star_action');
            if(localStorage.getItem('star_result')) document.getElementById('result').value = localStorage.getItem('star_result');
            updateCounts();
        };

        const inputs = ['situation', 'task', 'action', 'result'];
        inputs.forEach(id => {
            document.getElementById(id).addEventListener('input', function() {
                localStorage.setItem('star_' + id, this.value);
                updateCounts();
            });
        });

        function updateCounts() {
            let total = 0;
            inputs.forEach(id => {
                const text = document.getElementById(id).value;
                const count = text.trim() === '' ? 0 : text.trim().split(/\s+/).length;
                document.getElementById(id + 'Count').innerText = count + " words";
                total += count;
            });
            document.getElementById('totalCount').innerText = "Total: " + total + " words";
        }

        function generate() {
            const s = document.getElementById('situation').value.trim();
            const t = document.getElementById('task').value.trim();
            const a = document.getElementById('action').value.trim();
            const r = document.getElementById('result').value.trim();

            if(!s || !t || !a || !r) {
                alert("Please complete all 4 sections (S.T.A.R) before generating.");
                return;
            }

            const final = `In this scenario, ${s}. My specific responsibility was to ${t}. To address this, I ${a}. Consequently, ${r}.`;

            const out = document.getElementById('outputBox');
            out.style.display = 'block';
            out.innerHTML = `<strong>>> GENERATED COMPETENCY STATEMENT:</strong><br><br>${final}`;
            
            // Show AI Button
            document.getElementById('aiBtn').style.display = 'block';
            
            // Scroll
            out.scrollIntoView({behavior: "smooth"});
        }
        
        // --- NEW AI PROMPT GENERATOR ---
        function copyAiPrompt() {
            const s = document.getElementById('situation').value;
            const t = document.getElementById('task').value;
            const a = document.getElementById('action').value;
            const r = document.getElementById('result').value;

            const prompt = `Act as a Professional Review Interviewer for the IMechE/IET. I am drafting a competency example for CEng Registration.

Please critique the following S.T.A.R example against the UK-SPEC requirements for "Technical Innovation" and "Leadership".

SITUATION: ${s}
TASK: ${t}
ACTION: ${a}
RESULT: ${r}

1. Identify where I have used "Weak Language" (e.g. "We", "Helped").
2. Suggest 3 specific ways to make the "Action" section stronger and more technical.
3. Give this a score out of 10 for "Action Bias".`;

            navigator.clipboard.writeText(prompt).then(() => {
                const btn = document.getElementById('aiBtn');
                btn.innerText = ">> COPIED! PASTE INTO CHATGPT";
                setTimeout(() => { btn.innerText = ">> COPY AI \"CEng CRITIQUE\" PROMPT"; }, 3000);
            });
        }
        
        function clearData() {
            if(confirm("Are you sure? This will clear your draft.")) {
                inputs.forEach(id => {
                    document.getElementById(id).value = "";
                    localStorage.removeItem('star_' + id);
                });
                updateCounts();
                document.getElementById('outputBox').style.display = 'none';
                document.getElementById('aiBtn').style.display = 'none';
            }
        }
    </script>
</body>
</html>